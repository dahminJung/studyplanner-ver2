<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Planner Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;700;800&display=swap" rel="stylesheet">
</head>
<body>
    <div class="dashboard">
        <!-- Left Panel: Subjects & Timer -->
        <aside class="panel left-panel">
            <header class="logo">
                <h1>Study<span>Planner</span></h1>
            </header>
            
            <section class="card subjects-card">
                <h2>📚 과목 관리</h2>
                <div class="add-subject">
                    <input type="text" id="subject-name" placeholder="새 과목명">
                    <input type="color" id="subject-color" value="#6366f1">
                    <button id="add-subject-btn">+</button>
                </div>
                <ul id="subject-list" class="subject-list"></ul>
            </section>

            <section class="card timer-card">
                <h2>⏱️ 학습 타이머</h2>
                <div class="timer-display" id="timer-display">00:00:00</div>
                <div class="timer-controls">
                    <button id="timer-start" class="btn primary">시작</button>
                    <button id="timer-stop" class="btn warning" disabled>정지</button>
                    <button id="timer-reset" class="btn secondary">초기화</button>
                </div>
                <div class="timer-save-area" id="timer-save-area" style="display: none;">
                    <p>기록할 과목을 선택하세요:</p>
                    <select id="timer-subject-select"></select>
                    <button id="timer-save-btn" class="btn primary">저장</button>
                </div>
                <p class="timer-notice">⚠️ 다른 탭으로 이동 시 자동으로 정지됩니다.</p>
            </section>
        </aside>

        <!-- Main Panel: To-Do & Time Table -->
        <main class="panel main-panel">
            <section class="card todo-card">
                <h2>📋 투두 리스트 (To-Do)</h2>
                <div class="add-todo">
                    <input type="text" id="todo-input" placeholder="오늘 해야 할 일을 적어보세요">
                    <select id="todo-subject-select">
                        <option value="">과목 없음</option>
                    </select>
                    <button id="add-todo-btn" class="btn primary">추가</button>
                </div>
                <ul id="todo-list" class="todo-list"></ul>
            </section>

            <section class="card timetable-card">
                <div class="timetable-header">
                    <h2>📅 일간 시간표</h2>
                    <p class="subtitle">블록을 클릭하여 학습 시간을 배정하세요.</p>
                </div>
                <div class="timetable-container">
                    <div class="time-labels" id="time-labels"></div>
                    <div class="time-grid" id="time-grid"></div>
                </div>
            </section>
        </main>

        <!-- Right Panel: Statistics -->
        <aside class="panel right-panel">
            <section class="card stats-card">
                <h2>📊 학습 통계</h2>
                
                <div class="stats-overview">
                    <div class="stat-box">
                        <span class="stat-title">총 학습 시간</span>
                        <strong class="stat-value" id="total-time-val">0h 0m</strong>
                    </div>
                    <div class="stat-box">
                        <span class="stat-title">투두 달성률</span>
                        <strong class="stat-value" id="todo-rate-val">0%</strong>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>과목별 비중 (Pie Chart)</h3>
                    <div class="pie-chart" id="pie-chart"></div>
                    <ul class="chart-legend" id="chart-legend"></ul>
                </div>

                <div class="chart-container">
                    <h3>과목별 학습 시간 (Bar Chart)</h3>
                    <div class="bar-chart" id="bar-chart"></div>
                </div>
            </section>
        </aside>

        <!-- 모달 (과목 배정용) -->
        <div id="modal-overlay" class="modal-overlay">
            <div class="modal">
                <h3>시간 배정</h3>
                <p>해당 시간에 배정할 과목을 선택하세요.</p>
                <select id="modal-subject-select"></select>
                <div class="modal-actions">
                    <button id="modal-cancel" class="btn secondary">취소</button>
                    <button id="modal-clear" class="btn warning">비우기</button>
                    <button id="modal-confirm" class="btn primary">확인</button>
                </div>
            </div>
        </div>
    </div>
    <script type="module" src="main.js"></script>
</body>
</html>
